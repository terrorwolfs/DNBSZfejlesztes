{"chunk":0,"numChunks":1,"fileHash":"TxViWzmSJCwUZ6eKOIpQaU9jNeePJ9X+HdJvc0jnJ6M=","filePath":"FlaskWebProject/WebApp/__init__.py","content":"from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_migrate import Migrate\nfrom config import config\nimport logging\nfrom logging.handlers import RotatingFileHandler\nimport os\n\ndb = SQLAlchemy()\nmigrate = Migrate()\n\ndef create_app(config_name='default'):\n    app = Flask(__name__)\n    app.config.from_object(config[config_name])\n\n    db.init_app(app)\n    migrate.init_app(app, db)\n\n    if not app.debug and not app.testing:\n        if not os.path.exists('logs'):\n            os.mkdir('logs')\n        file_handler = RotatingFileHandler('logs/hotel.log', maxBytes=10240, backupCount=10)\n        file_handler.setFormatter(logging.Formatter(\n            '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'\n        ))\n        file_handler.setLevel(logging.INFO)\n        app.logger.addHandler(file_handler)\n        app.logger.setLevel(logging.INFO)\n        app.logger.info('Hotel startup')\n\n    from .routes import routes\n    app.register_blueprint(routes)\n    return app\n"}